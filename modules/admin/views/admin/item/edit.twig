{% extends interface_template|default("admin/shared/interface.twig") %}

{% block html_title %}Edit {{ singular }} : {{ admin_title }}{% endblock %}

{% block main_pane %}
    
    {% include 'admin/shared/alert.twig' %}
    
    <form action="" method="post" class="item-form" enctype="multipart/form-data">
    
    <input type="hidden" name="_mode" value="{{ mode }}" />
    <input type="hidden" name="_cid" value="{{ cid }}" />
    
    <div class="inner">

        <h2 class="main-heading pull-left"><i class="icon icon-{{ icon }}"></i> Edit {{ singular }}</h2>
        <!-- div class="item-actions-top pull-right">
            <a href="#" class="btn btn-medium btn-inverse btn-permissions" rel="tooltip" title="Edit {{ singular|lower }} permissions"><i class="icon icon-lock"></i></a>
        </div -->
        <div class="clear"></div>
        
        {% if form.content|length > 1 %}
        <ul class="nav nav-pills">
            {% for tab in form.content %}
            <li class="{{ loop.index == 1 ? 'active' : '' }}"><a href="#tab-{{ tab.slug }}" data-toggle="tab">{{ tab.title }}</a></li>
            {% endfor %}
        </ul>
        {% endif %}
            
        <!-- START ITEM EDIT FORM -->
        
        <div class="tab-content">
            
            {% for tab in form.content %}
            
            <div class="tab-pane {{ loop.index == 1 ? 'active' : '' }}" id="tab-{{ tab.slug }}">
                
                {% for group in tab.groups %}
                    
                    <div class="row-fluid">
                    <div class="widget{{ (group.collapsible and tab.groups|length > 1) ? ' collapsible' : '' }}{{ (group.closed and tab.groups|length > 1) ? ' closed' : '' }} span12 {{ group.class }}">
                        
                        <div class="widget-title">
                            <h3><i class="icon icon-{{ group.icon }}"></i> {{ group.title }}</h3>
                        </div>
                        <div class="widget-content">
                            
                            {% for field in group.fields %}
                            
                            {{ form.fields[field].content }}
                            
                            {% endfor %}
                            
                        </div>
                        
                    </div>
                    </div>
                    
                {% endfor %}
                
            </div>
            
            {% endfor %}
            
        </div>
        
        {% for hidden_field in form.hidden_fields %}
        {{ hidden_field }}    
        {% endfor %}
        
        <!-- END ITEM EDIT FORM -->
    
    </div> <!-- .inner -->

{% endblock %}

{% block bottom %}

<div id="controls-fixed-bot"><div class="inner">

    <div class="status pull-left">
        Item was last updated {{ model.get('updated_at')|date("d/m/Y \\a\\t H:i:s", "Europe/London") }}
        <!-- span>Page rendered in {exec_time}s using {mem_usage}mb of memory.</span -->
    </div>

    <div class="actions pull-right">
        <button data-loading-text="Saving {{ singular }}..." class="btn btn-large btn-primary submit-item" autocomplete="off"><i class="icon-ok icon-white"></i> Save</button>
        {% if not static %}
        <a href="delete" class="btn btn-large btn-danger btn-remove padleft" data-singular="{{ singular }}"><i class="icon-remove icon-white"></i> Delete</a>
        {% endif %}
    </div>
    
    <!-- Clips Modal HTML -->        
    <div id="clipsmodal" style="display: none;">
        <div id="redactor_modal_content">
            <div class="redactor_modal_box">
                <ul class="redactor_clips_box">
                    <li>
                        <a href="#" class="redactor_clip_link">Lorem ipsum â€¦</a>
                        
                        <div class="redactor_clip" style="display: none;">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                        </div> 
                    </li>
                    <li>
                        <a href="#" class="redactor_clip_link">Red label</a>
                        
                        <div class="redactor_clip" style="display: none;">
                            <span class="label-red">Label</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div id="redactor_modal_footer">
            <a href="#" class="redactor_modal_btn redactor_btn_modal_close">Close</a>
        </div>
    </div>

</div></div>

</form>

{% endblock %}

{% block breadcrumb %}

<li><a href="/admin">Dashboard</a> <span class="divider">/</span></li>
{% if not static %}<li><a href="/admin/{{ table_name }}">{{ plural }}</a> <span class="divider">/</span></li>{% endif %}
<li class="active">{{ model.display() }}</li>

{% endblock %}

{% block admin_css %}
    {% for css in form.assets.css %}
        <link rel="stylesheet" type="text/css" href="{{ css }}">
    {% endfor %}
{% endblock %}

{% block admin_js %}
    {{ parent() }}
    {% for js in form.assets.js %}
        <script type="text/javascript" src="{{ js }}"></script>
    {% endfor %}
    <script type="text/javascript">
        var field_settings = {{ form.js_field_settings|json_encode }};
    </script>
{% endblock %}
